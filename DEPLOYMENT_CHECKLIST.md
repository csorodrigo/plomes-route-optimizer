# Railway Deployment Prevention Checklist

## 🚨 Critical Issue Resolved
**Problem**: Files existed locally but weren't tracked in git, causing "Module not found" errors during Railway deployment.

**Root Cause**: Git was not tracking several component files that were being imported by other modules.

## ✅ Files Added to Git (Fixed)
- `frontend/src/components/common/Logo.jsx` ❌ → ✅
- `frontend/src/components/common/Logo.stories.jsx` ❌ → ✅
- `frontend/src/components/common/__tests__/Logo.test.jsx` ❌ → ✅
- `frontend/src/components/CustomerSelector.tsx` ❌ → ✅
- `frontend/src/components/PriceHistoryChart.tsx` ❌ → ✅
- `frontend/src/__tests__/App.integration.test.jsx` ❌ → ✅
- `frontend/src/test-pdf.js` ❌ → ✅
- `frontend/src/utils/translations-README.md` ❌ → ✅

## 🔍 Pre-Deployment Checklist

### 1. Git Tracking Verification
```bash
# Check for untracked files that are being imported
git status --porcelain | grep "^??"

# Verify all imports can be resolved
grep -r "import.*from ['\"]\./" frontend/src/
```

### 2. Build Pipeline Test
```bash
# Always test build before deployment
npm run build

# Verify no module resolution errors
npm run test --passWithNoTests
```

### 3. Import Path Audit
```bash
# Check for relative imports
grep -r "import.*from ['\"]\./" frontend/src/ | grep -v node_modules

# Verify all referenced files exist
find frontend/src -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" | xargs grep -l "import.*from ['\"]\./"
```

### 4. File Structure Validation
```bash
# List all source files
find frontend/src -type f \( -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx" \) | sort

# Compare with git tracked files
git ls-files frontend/src/ | grep -E '\.(js|jsx|ts|tsx)$' | sort
```

## 🛡️ Prevention Strategies

### Development Workflow
1. **Always add new files to git immediately after creation**
2. **Test builds locally before pushing**
3. **Use absolute imports where possible**
4. **Regular git status checks during development**

### Automated Checks
```bash
# Add this to your .githooks/pre-commit
#!/bin/bash
echo "Checking for untracked imports..."
UNTRACKED=$(git status --porcelain | grep "^??" | grep -E "\.(js|jsx|ts|tsx)$")
if [ ! -z "$UNTRACKED" ]; then
    echo "❌ Warning: Untracked source files detected:"
    echo "$UNTRACKED"
    echo "Add these files to git or add to .gitignore"
    exit 1
fi

echo "Testing build..."
npm run build
if [ $? -ne 0 ]; then
    echo "❌ Build failed"
    exit 1
fi

echo "✅ Pre-commit checks passed"
```

## 🎯 Key Lessons Learned

1. **Local vs Remote Parity**: Always ensure local file structure matches what's in git
2. **Import Resolution**: Railway builds in a clean environment without local untracked files
3. **Testing Strategy**: Local builds must be tested in conditions similar to deployment
4. **File Tracking**: Every imported file MUST be tracked in git

## 🚀 Success Metrics

- ✅ Build passes: `npm run build` completes without errors
- ✅ No untracked imports: All imported files are in git
- ✅ Module resolution: No "Module not found" errors
- ✅ Deployment ready: Railway can find all referenced files

---
*Generated by Claude Code Orchestrator - Railway Deployment Fix*